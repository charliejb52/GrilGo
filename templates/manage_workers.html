{% extends "base.html" %}

{% block content %}
<h2>Manage Workers</h2>

<a href="{{ url_for('dashboard_manager') }}" class="btn btn-secondary">Back to calendar</a>

<!-- Add Worker Form -->
<form method="POST" action="{{ url_for('add_worker') }}">
    <label for="name">Worker Name:</label>
    <input type="text" name="name" required><br>

    <label>
        <input type="checkbox" name="is_cart_staff"> Cart Staff
    </label><br>

    <label>
        <input type="checkbox" name="is_turn_grill_staff"> Turn-Grill Staff
    </label><br>

    <button type="submit">Add Worker</button>
</form>

<hr>

<!-- Current Workers -->
<table class="table">
    <tr>
        <th>Name</th>
        <th>Cart Staff</th>
        <th>Turn-Grill Staff</th>
        <th>Actions</th>
    </tr>
    {% for worker in workers %}
    <tr>
        <td>{{ worker.name }}</td>
        <td>
            <form action="{{ url_for('toggle_cart_staff', worker_id=worker.id) }}" method="post">
                <input type="checkbox" name="is_cart_staff" value="1"
                       onchange="this.form.submit()" {% if worker.is_cart_staff %}checked{% endif %}>
            </form>
        </td>
        <td>
            <form action="{{ url_for('toggle_turn_grill_staff', worker_id=worker.id) }}" method="post">
                <input type="checkbox" name="is_turn_grill_staff" value="1"
                       onchange="this.form.submit()" {% if worker.is_turn_grill_staff %}checked{% endif %}>
            </form>
        </td>
        <td>
            <form action="{{ url_for('delete_worker', worker_id=worker.id) }}" method="post" style="display:inline;">
                <button type="submit" class="btn btn-danger btn-sm"
                    onclick="return confirm('Delete {{ worker.name }}?')">Delete</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
